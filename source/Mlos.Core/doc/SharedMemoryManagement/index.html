<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Shared Memory Management Bootstrap sequence Overview Target process, process which hold tunable components.
MLOS Agent - the agent process, responsible for collecting the telemetry and communicating with the optimizer.
OS implementation differences. MLOS is handling shared memory differently on Windows and Linux.
Linux is creating anonymous shared memory, and it is passing a file descriptor between the processes using Unix domain socket.
The target process is responsible for creating shared memory regions and channel synchronization primitives.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="" />
<meta property="og:description" content="Shared Memory Management Bootstrap sequence Overview Target process, process which hold tunable components.
MLOS Agent - the agent process, responsible for collecting the telemetry and communicating with the optimizer.
OS implementation differences. MLOS is handling shared memory differently on Windows and Linux.
Linux is creating anonymous shared memory, and it is passing a file descriptor between the processes using Unix domain socket.
The target process is responsible for creating shared memory regions and channel synchronization primitives." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://microsoft.github.io/MLOS/source/Mlos.Core/doc/SharedMemoryManagement/" />

<title>Shared Memory Management | MLOS</title>
<link rel="manifest" href="/MLOS/manifest.json">
<link rel="icon" href="/MLOS/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/MLOS/book.min.6cd8553a6854f4812343f0f0c8baca31271e686434f381fbe3c7226f66639176.css" integrity="sha256-bNhVOmhU9IEjQ/DwyLrKMSceaGQ084H748cib2ZjkXY=">
<script defer src="/MLOS/en.search.min.3bc341df60d01c43aef51688839b480225bddba77d772c6573e4e5702cccbfd2.js" integrity="sha256-O8NB32DQHEOu9RaIg5tIAiW926d9dyxlc&#43;TlcCzMv9I="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/MLOS"><span>MLOS</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  <ul>
<li>
<p><a href="/MLOS/documentation/">Documentation</a></p>
<ul>
<li><a href="/MLOS/documentation/01-Prerequisites/">Prerequisites</a></li>
<li><a href="/MLOS/documentation/02-Build/">Build</a></li>
<li><a href="/MLOS/documentation/04-Test/">Test</a></li>
<li><a href="/MLOS/documentation/CodingStandard/">Coding Standard</a></li>
<li><a href="/MLOS/documentation/MlosArchitecture/">Architecture</a></li>
<li><a href="/MLOS/documentation/RepoOrganization/">Repo Organization</a></li>
</ul>
</li>
<li>
<p><a href="/MLOS/notebooks/">Notebooks</a></p>
<ul>
<li><a href="/MLOS/notebooks/BayesianOptimization/">Bayesian Optimization</a></li>
<li><a href="/MLOS/notebooks/SmartCacheOptimization/">Smart Cache Optimization</a></li>
<li><a href="/MLOS/notebooks/SmartCacheCPP/">Smart Cache Optimization in C++</a></li>
<li><a href="/MLOS/notebooks/LevelDbTuning/">LevelDB External Tuning Example</a></li>
</ul>
</li>
<li>
<p><a href="/MLOS/source/Examples/">E2E Examples</a></p>
<ul>
<li><a href="/MLOS/source/Examples/SmartCache/">Smart Cache</a></li>
</ul>
</li>
<li>
<p>API Documentation</p>
<ul>
<li><a href="/MLOS/python_api/">Python</a></li>
</ul>
</li>
<li>
<p>Component Documentation</p>
<ul>
<li><a href="/MLOS/source/Mlos.SettingsSystem.CodeGen/">Mlos Settings System Code Generation System</a></li>
<li><a href="/MLOS/source/Mlos.Core/doc/">Mlos.Core Shared Memory Communication Channel</a></li>
<li><a href="/MLOS/source/Mlos.Agent.Server/">Mlos.Agent.Server</a></li>
</ul>
</li>
<li>
<p><a href="/MLOS/external/">External Integration</a></p>
</li>
<li>
<p><a href="/MLOS/CODE_OF_CONDUCT/">Code of Conduct</a></p>
</li>
<li>
<p><a href="/MLOS/CONTRIBUTING/">Contributing</a></p>
</li>
<li>
<p><a href="https://github.com/Microsoft/MLOS">MLOS Github Repository</a></p>
</li>
</ul>










</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/MLOS/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Shared Memory Management</strong>

  <label for="toc-control">
    
    <img src="/MLOS/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <nav id="TableOfContents">
  <ul>
    <li><a href="#os-implementation-differences">OS implementation differences.</a></li>
    <li><a href="#implementation-details">Implementation details</a>
      <ul>
        <li><a href="#sharedmemorymapview">SharedMemoryMapView</a></li>
        <li><a href="#sharedmemoryregionview">SharedMemoryRegionView</a></li>
      </ul>
    </li>
  </ul>
</nav>


  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="shared-memory-management">Shared Memory Management</h1>
<h1 id="bootstrap-sequence">Bootstrap sequence</h1>
<h1 id="overview">Overview</h1>
<p>Target process, process which hold tunable components.</p>
<p>MLOS Agent - the agent process, responsible for collecting the telemetry and communicating with the optimizer.</p>
<h2 id="os-implementation-differences">OS implementation differences.</h2>
<p>MLOS is handling shared memory differently on Windows and Linux.</p>
<p>Linux is creating anonymous shared memory, and it is passing a file descriptor between the processes using <a href="https://man7.org/linux/man-pages/man7/unix.7.html">Unix domain socket</a>.</p>
<p>The target process is responsible for creating shared memory regions and channel synchronization primitives.
Once the shared memory is created, the target process will connect to the Unix socket and sends the shared memory file
descriptors. Once the agent obtains all the required shared memory descriptors, the agent will start processing shared channel messages.</p>
<p>On startup, the target process creates a thread which is responsible for handling agent request.
If the agent restarts, it will notify the target process that it needs a list of file descriptors once the target process reconnects to the socket.</p>
<h2 id="implementation-details">Implementation details</h2>
<h3 id="sharedmemorymapview">SharedMemoryMapView</h3>
<h3 id="sharedmemoryregionview">SharedMemoryRegionView</h3>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#os-implementation-differences">OS implementation differences.</a></li>
    <li><a href="#implementation-details">Implementation details</a>
      <ul>
        <li><a href="#sharedmemorymapview">SharedMemoryMapView</a></li>
        <li><a href="#sharedmemoryregionview">SharedMemoryRegionView</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












